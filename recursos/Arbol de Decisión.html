<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase : Ãrboles de DecisiÃ³n</title>
    <!-- Estilos completados -->
    <style>
        :root {
            --primary-color: #2e7d32;
            --secondary-color: #81c784;
            --accent-color: #4caf50;
            --success-color: #388e3c;
            --warning-color: #f57c00;
            --danger-color: #d32f2f;
            --info-color: #1976d2;
            --dark-bg: #1b1b1b;
            --code-bg: #0d1117;
            --leaf-color: #8bc34a;
            --branch-color: #795548;
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;line-height:1.8;color:#2c3e50;background:linear-gradient(135deg,#43a047 0%,#1b5e20 100%);min-height:100vh;}
        .container{max-width:1200px;margin:0 auto;padding:20px;background:rgba(255,255,255,0.96);backdrop-filter:blur(12px);border-radius:20px;margin-top:20px;margin-bottom:20px;box-shadow:0 25px 50px rgba(0,0,0,0.15);}
        h1,h2,h3,h4{color:var(--primary-color);margin-bottom:20px;position:relative;}
        h1{font-size:2.8em;text-align:center;background:linear-gradient(45deg,#43a047,#1b5e20);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:30px;text-shadow:2px 2px 4px rgba(0,0,0,0.1);}
        h2{font-size:2.2em;border-bottom:3px solid var(--secondary-color);padding-bottom:10px;margin-top:40px;}
        h3{font-size:1.6em;color:var(--accent-color);margin-top:30px;}
        .header-info{text-align:center;margin-bottom:40px;padding:20px;background:linear-gradient(135deg,#43a04720,#1b5e2020);border-radius:15px;border:2px solid var(--secondary-color);}
        .progress-bar{width:100%;height:6px;background:#e0e0e0;border-radius:3px;margin:20px 0;overflow:hidden;}
        .progress-fill{height:100%;background:linear-gradient(90deg,var(--accent-color),var(--secondary-color));border-radius:3px;transition:width .3s ease;}
        pre{background:var(--code-bg);color:#e6edf3;padding:25px;border-radius:15px;white-space:pre-wrap;font-family:'JetBrains Mono','Fira Code','Consolas',monospace;font-size:14px;overflow-x:auto;border:1px solid #30363d;position:relative;box-shadow:0 8px 32px rgba(0,0,0,0.3);} 
        .code-header{background:#21262d;margin:-25px -25px 15px -25px;padding:15px 25px;border-radius:15px 15px 0 0;border-bottom:1px solid #30363d;font-weight:bold;color:#7d8590;display:flex;justify-content:space-between;align-items:center;} 
        .copy-btn{background:var(--accent-color);color:#fff;border:none;padding:5px 15px;border-radius:5px;cursor:pointer;font-size:12px;transition:all .3s;}
        .copy-btn:hover{background:var(--success-color);transform:translateY(-2px);} 
        code{font-family:'JetBrains Mono',monospace;background:rgba(76,175,80,.1);padding:2px 6px;border-radius:4px;color:var(--primary-color);font-weight:600;}
        pre code{color:#e6edf3;background:none;padding:0;font-weight:normal;}
        .analogy{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border:2px solid var(--warning-color);padding:25px;border-radius:15px;margin:25px 0;position:relative;box-shadow:0 8px 25px rgba(245,124,0,.2);} 
        .analogy::before{content:"ğŸ©º";position:absolute;top:-15px;left:20px;background:#fff;padding:5px 10px;border-radius:50px;font-size:20px;} 
        .definition{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-left:8px solid var(--success-color);padding:25px;margin:25px 0;border-radius:0 15px 15px 0;box-shadow:0 8px 25px rgba(76,175,80,.2);} 
        .highlight{background:linear-gradient(120deg,#81c784 0%,#aed581 100%);padding:2px 8px;border-radius:4px;font-weight:600;}
        .tabs{display:flex;margin-bottom:20px;background:rgba(255,255,255,0.3);border-radius:10px;padding:5px;flex-wrap:wrap;}
        .tab{flex:1;min-width:120px;padding:12px;text-align:center;border-radius:8px;cursor:pointer;transition:all .3s;font-weight:600;margin:2px;}
        .tab.active{background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.1);color:var(--primary-color);} 
        .tab-content{display:none;}
        .tab-content.active{display:block;animation:fadeIn .5s;} 
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);} }
        .tree-container{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:30px;border-radius:15px;margin:25px 0;text-align:center;overflow-x:auto;}
        .tree-interactive{margin:20px 0;padding:20px;background:#fff;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,.1);} 
        .node{display:inline-block;padding:15px 20px;margin:5px;border-radius:10px;font-weight:bold;cursor:pointer;transition:all .3s;position:relative;}
        .node.root{background:var(--primary-color);color:#fff;font-size:1.1em;}
        .node.internal{background:var(--accent-color);color:#fff;}
        .node.leaf{background:var(--leaf-color);color:#1b5e20;}
        .node:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,.2);} 
        .metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0;} 
        .metric-card{background:#fff;padding:20px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1);border-left:5px solid var(--accent-color);} 
        .metric-value{font-size:2em;font-weight:bold;color:var(--primary-color);} 
        .algorithm-comparison{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin:20px 0;} 
        .algorithm-card{background:#fff;padding:20px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1);transition:transform .3s;} 
        .algorithm-card:hover{transform:translateY(-5px);} 
        .algorithm-card h4{color:var(--accent-color);margin-bottom:10px;}
        .floating-nav{position:fixed;right:20px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.9);backdrop-filter:blur(10px);border-radius:15px;padding:15px;box-shadow:0 8px 25px rgba(0,0,0,.1);z-index:1000;}
        .floating-nav a{display:block;padding:8px 12px;color:var(--primary-color);text-decoration:none;border-radius:8px;margin:5px 0;transition:all .3s;font-size:14px;}
        .floating-nav a:hover{background:var(--secondary-color);transform:translateX(-5px);} 
        .interactive-demo{background:#fff;padding:20px;border-radius:15px;margin:20px 0;box-shadow:0 4px 15px rgba(0,0,0,.1);} 
        .demo-controls{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;align-items:center;}
        .demo-btn{padding:10px 20px;background:var(--accent-color);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s;}
        .demo-btn:hover{background:var(--success-color);transform:translateY(-2px);} 
        .visualization-container{min-height:400px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;border-radius:10px;margin:20px 0;} 
        .pros-cons{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:20px 0;} 
        .pros,.cons{padding:20px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1);} 
        .pros{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-left:5px solid var(--success-color);} 
        .cons{background:linear-gradient(135deg,#ffebee,#ffcdd2);border-left:5px solid var(--danger-color);} 
        .warning-box{background:linear-gradient(135deg,#fff8e1,#ffecb3);border:2px solid var(--warning-color);padding:20px;border-radius:15px;margin:20px 0;position:relative;} 
        .warning-box::before{content:"âš ï¸";position:absolute;top:-15px;left:20px;background:#fff;padding:5px 10px;border-radius:50px;font-size:18px;} 
        @media(max-width:768px){.container{margin:10px;padding:15px;border-radius:15px;}h1{font-size:2.2em;}h2{font-size:1.8em;}pre{font-size:12px;padding:15px;}.floating-nav{display:none;}.tabs{flex-direction:column;}.tab{flex:none;}.pros-cons{grid-template-columns:1fr;}}
    </style>
</head>
<body>
    <div class="floating-nav">
        <a href="#introduccion">ğŸŒ³ IntroducciÃ³n</a>
        <a href="#anatomia">ğŸ—ï¸ AnatomÃ­a</a>
        <a href="#algoritmos">ğŸ”§ Algoritmos</a>
        <a href="#metricas">ğŸ“Š MÃ©tricas</a>
        <a href="#implementacion">ğŸ’» CÃ³digo</a>
        <a href="#ensembles">ğŸŒ² Ensembles</a>
        <a href="#aplicaciones">ğŸ¯ Aplicaciones</a>
    </div>

    <div class="container">
        <h1>ğŸŒ³ Ãrboles de DecisiÃ³n: El Arte del Razonamiento JerÃ¡rquico</h1>
        <div class="header-info">
            <p><strong>ğŸ‘¨â€ğŸ« Profesor:</strong> Sergio Gevatschnaider</p>
            <p><strong>â±ï¸ DuraciÃ³n:</strong> 120 minutos</p>
            <p><strong>ğŸ¯ Nivel:</strong> Intermedioâ€‘Avanzado</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress" style="width:0%"></div>
            </div>
        </div>

        <!-- 1. INTRODUCCIÃ“N -->
        <section id="introduccion">
            <h2>ğŸŒ³ 1. El Ãrbol como MetÃ¡fora del Razonamiento</h2>
            <div class="analogy">
                <h3>ğŸ©º El MÃ©dico en la Guardia: Un DiagnÃ³stico Paso a Paso</h3>
                <p>Imagina que acompaÃ±as a un mÃ©dico reciÃ©n llegado a una guardia. Frente a cada paciente, Ã©l hace una serie de preguntas estratÃ©gicas:</p>
                <ul>
                    <li><strong>Â«Â¿Tiene fiebre?Â»</strong> â†’ Si SÃ: investigar infecciÃ³n</li>
                    <li><strong>Â«Â¿Existe dolor en el pecho?Â»</strong> â†’ Si SÃ: evaluar corazÃ³n</li>
                    <li><strong>Â«Â¿Dificultad para respirar?Â»</strong> â†’ Si SÃ: examinar pulmones</li>
                </ul>
                <p>SegÃºn las respuestas, descarta o confirma diagnÃ³sticos hasta llegar a una conclusiÃ³n. Esa secuencia de <span class="highlight">preguntas binarias</span> â€”y la lÃ³gica que las organizaâ€” es exactamente lo que un Ã¡rbol de decisiÃ³n formaliza: un <span class="highlight">camino jerÃ¡rquico</span> donde cada bifurcaciÃ³n responde a la pregunta que mejor distingue lo que nos interesa predecir.</p>
            </div>
            <!-- Miniâ€‘visualizaciÃ³n SVG omitida por brevedad -->
        </section>

        <!-- 2. ANATOMÃA -->
        <section id="anatomia">
            <h2>ğŸ—ï¸ 2. AnatomÃ­a de un Ãrbol</h2>
            <div class="definition">
                <h4>ğŸ” Componentes Fundamentales</h4>
                <p>Un Ã¡rbol de decisiÃ³n se compone de tres elementos esenciales que forman su estructura jerÃ¡rquica de razonamiento:</p>
            </div>
            <div class="algorithm-comparison">
                <div class="algorithm-card"><h4>ğŸŒ± Nodo RaÃ­z</h4><p><strong>FunciÃ³n:</strong> Punto de partida del Ã¡rbol</p><p><strong>CaracterÃ­stica:</strong> Pregunta mÃ¡s discriminante</p></div>
                <div class="algorithm-card"><h4>ğŸ”€ Nodos Internos</h4><p><strong>FunciÃ³n:</strong> Ramificaciones que refinan la clasificaciÃ³n</p><p><strong>CaracterÃ­stica:</strong> Pruebas sucesivas</p></div>
                <div class="algorithm-card"><h4>ğŸƒ Hojas</h4><p><strong>FunciÃ³n:</strong> PredicciÃ³n final</p><p><strong>CaracterÃ­stica:</strong> Etiqueta o valor</p></div>
            </div>
            <div class="tree-interactive">
                <h4>ğŸ¯ Ãrbol Interactivo: Haz clic en los nodos</h4>
                <div style="text-align:center;margin:20px 0;">
                    <div class="node root" onclick="highlightPath('root')">Edad â‰¤ 30?</div><br><br>
                    <div class="node internal" onclick="highlightPath('income')">Ingresos â‰¤ 50K?</div>
                    <div class="node internal" onclick="highlightPath('credit')">Historial&nbsp;Crediticio?</div><br><br>
                    <div class="node leaf" onclick="highlightPath('approve')">âœ… Aprobar</div>
                    <div class="node leaf" onclick="highlightPath('review')">âš ï¸ Revisar</div>
                    <div class="node leaf" onclick="highlightPath('reject')">âŒ Rechazar</div>
                    <div class="node leaf" onclick="highlightPath('approve2')">âœ… Aprobar</div>
                </div>
                <div id="path-explanation" style="display:none;margin-top:20px;padding:15px;background:#f0f8ff;border-radius:8px;">
                    <p id="explanation-text"></p>
                </div>
            </div>
        </section>

        <!-- 3. MÃ‰TRICAS -->
        <section id="metricas">
            <h2>ğŸ“Š 3. Â¿CÃ³mo Decide el Ãrbol QuÃ© Preguntar?</h2>
            <p>Para cada posible divisiÃ³n, el algoritmo mide <span class="highlight">impureza</span> o <span class="highlight">error</span>. Luego elige la pregunta que mÃ¡s purifica los grupos resultantes.</p>
            <div class="tabs">
                <div class="tab active" onclick="showTab(event,'entropia')">ğŸ“ˆ EntropÃ­a</div>
                <div class="tab" onclick="showTab(event,'gini')">ğŸ¯ Ãndice Gini</div>
                <div class="tab" onclick="showTab(event,'sse')">ğŸ“Š Error CuadrÃ¡tico</div>
                <div class="tab" onclick="showTab(event,'demo')">ğŸ§ª Demo Interactivo</div>
            </div>
            <!-- EntropÃ­a -->
            <div id="entropia" class="tab-content active">
                <div class="definition">
                    <h4>ğŸ“ˆ EntropÃ­a: Midiendo el Desorden</h4>
                    <p><strong>FÃ³rmula:</strong> H(S) = âˆ’Î£ p<sub>i</sub> logâ‚‚ p<sub>i</sub></p>
                </div>
            </div>
            <!-- Gini -->
            <div id="gini" class="tab-content">
                <div class="definition">
                    <h4>ğŸ¯ Gini: Probabilidad de Error</h4>
                    <p><strong>FÃ³rmula:</strong> Gini(S) = 1 âˆ’ Î£ p<sub>i</sub>Â²</p>
                </div>
                <div class="visualization-container">
                    <canvas id="giniChart" width="400" height="250"></canvas>
                </div>
            </div>
            <!-- SSE -->
            <div id="sse" class="tab-content">
                <div class="definition">
                    <h4>ğŸ“Š Suma de Errores CuadrÃ¡ticos (SSE)</h4>
                    <p>Para regresiÃ³n: minimizar varianza dentro de cada rama.</p>
                </div>
            </div>
            <!-- Demo interactiva -->
            <div id="demo" class="tab-content">
                <div class="interactive-demo">
                    <h4>ğŸ§ª Calculadora de Impureza</h4>
                    <div class="demo-controls">
                        <label>ClaseÂ A:&nbsp;<input type="range" id="classA" min="0" max="100" value="50" oninput="updateMetrics()"></label>
                        <span id="classAValue">50%</span>
                    </div>
                    <div class="metrics-grid">
                        <div class="metric-card"><h4>EntropÃ­a</h4><div class="metric-value" id="entropyResult">1.000</div></div>
                        <div class="metric-card"><h4>Gini</h4><div class="metric-value" id="giniResult">0.500</div></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. ALGORITMOS -->
        <section id="algoritmos">
            <h2>ğŸ”§ 4. Algoritmos de ConstrucciÃ³n</h2>
            <div class="pros-cons">
                <div class="pros"><h4>ğŸ’¡ ID3 / C4.5 / C5.0</h4><p>Basados en entropÃ­a e informaciÃ³n mutua. Ideal para datos categÃ³ricos.</p></div>
                <div class="cons"><h4>âš™ï¸ CART</h4><p>Utiliza Gini (clasificaciÃ³n) o SSE (regresiÃ³n). Soporta caracterÃ­sticas numÃ©ricas y poda costâ€‘complexity.</p></div>
            </div>
        </section>

        <!-- 5. IMPLEMENTACIÃ“N -->
        <section id="implementacion">
            <h2>ğŸ’» 5. ImplementaciÃ³n en Python (scikitâ€‘learn)</h2>
            <pre><div class="code-header">decision_tree.py <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ Copiar</button></div><code class="language-python">from sklearn.tree import DecisionTreeClassifier
from sklearn.model_selection import train_test_split
from sklearn import datasets

# Cargar ejemplo de flores Iris
X, y = datasets.load_iris(return_X_y=True)
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

clf = DecisionTreeClassifier(criterion="gini", max_depth=4, random_state=42)
clf.fit(X_train, y_train)
print(f"Accuracy: {clf.score(X_test, y_test):.3f}")</code></pre>
        </section>

        <!-- 6. ENSEMBLES -->
        <section id="ensembles">
            <h2>ğŸŒ² 6. MÃ¡s AllÃ¡ del Ãrbol Ãšnico: Ensembles</h2>
            <div class="algorithm-comparison">
                <div class="algorithm-card"><h4>ğŸŒ³ Random Forest</h4><p>Promedia cientos de Ã¡rboles entrenados en subsets aleatorios â†’ menor varianza.</p></div>
                <div class="algorithm-card"><h4>ğŸš€ Gradient Boosting</h4><p>Cada Ã¡rbol corrige los errores del anterior â†’ menor sesgo.</p></div>
                <div class="algorithm-card"><h4>âš¡ XGBoost / LightGBM</h4><p>Implementaciones optimizadas para grandes datasets y GPU.</p></div>
            </div>
        </section>

        <!-- 7. APLICACIONES -->
        <section id="aplicaciones">
            <h2>ğŸ¯ 7. Aplicaciones Reales</h2>
            <ul>
                <li>ğŸ’³ EvaluaciÃ³n de crÃ©dito</li>
                <li>ğŸ©º DiagnÃ³stico mÃ©dico asistido</li>
                <li>ğŸ” DetecciÃ³n de fraude</li>
                <li>ğŸ¡ TasaciÃ³n inmobiliaria</li>
                <li>ğŸŒ± ClasificaciÃ³n de especies botÃ¡nicas</li>
            </ul>
        </section>
    </div>

    <!-- JavaScript: interactividad -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        /* ---------- NavegaciÃ³n por pestaÃ±as ---------- */
        function showTab(e, id){
            document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
            e.currentTarget.classList.add('active');
            document.getElementById(id).classList.add('active');
        }

        /* ---------- Ãrbol interactivo ---------- */
        const explanations={
            root:'Si la persona es â‰¤30 aÃ±os continuamos evaluando ingresos; si no, se pasa a historial crediticio.',
            income:'Edadâ‰¤30: Ingresosâ‰¤50K â†’ Aprobar; >50K â†’ Revisar.',
            credit:'Edad>30: Buen historial â†’ Aprobar; Malo â†’ Rechazar.',
            approve:'Ruta tomada: joven con ingresos moderados. â‡ï¸ CrÃ©dito aprobado.',
            approve2:'Ruta tomada: adulto con buen historial. â‡ï¸ CrÃ©dito aprobado.',
            review:'Ruta tomada: joven con ingresos altos. âš ï¸ RevisiÃ³n manual.',
            reject:'Ruta tomada: adulto con mal historial. âŒ CrÃ©dito rechazado.'
        };
        function highlightPath(key){
            const box=document.getElementById('path-explanation');
            const txt=document.getElementById('explanation-text');
            txt.textContent=explanations[key]||'';
            box.style.display='block';
        }

        /* ---------- MÃ©tricas demo ---------- */
        function updateMetrics(){
            const a=parseInt(document.getElementById('classA').value,10);
            document.getElementById('classAValue').textContent=a+'%';
            const pA=a/100, pB=1-pA;
            // EntropÃ­a
            let entropy=0;
            if(pA>0) entropy-=pA*Math.log2(pA);
            if(pB>0) entropy-=pB*Math.log2(pB);
            // Gini
            const gini=1-(pA*pA+pB*pB);
            document.getElementById('entropyResult').textContent=entropy.toFixed(3);
            document.getElementById('giniResult').textContent=gini.toFixed(3);
        }

        /* ---------- Progreso de lectura ---------- */
        window.addEventListener('scroll',()=>{
            const winScroll=document.body.scrollTop||document.documentElement.scrollTop;
            const height=document.documentElement.scrollHeight-document.documentElement.clientHeight;
            const scrolled=(winScroll/height)*100;
            document.getElementById('progress').style.width=scrolled+"%";
        });

        /* ---------- Copiar cÃ³digo ---------- */
        function copyCode(btn){
            const pre=btn.closest('pre');
            const code=pre.querySelector('code').innerText;
            navigator.clipboard.writeText(code).then(()=>{
                btn.innerText='âœ… Copiado!';
                setTimeout(()=>{btn.innerText='ğŸ“‹ Copiar';},2000);
            });
        }

        /* ---------- GrÃ¡fico EntropÃ­a vs Gini ---------- */
        function drawChart(){
            const labels=[...Array(101).keys()].map(v=>v/100);
            const entropyData=labels.map(p=>{
                const q=1-p;let h=0;if(p>0)h-=p*Math.log2(p);if(q>0)h-=q*Math.log2(q);return h;});
            const giniData=labels.map(p=>1-(p*p+(1-p)*(1-p)));
            new Chart(document.getElementById('giniChart'),{
                type:'line',
                data:{labels:labels,data:null,datasets:[{label:'EntropÃ­a',data:entropyData,fill:false,borderWidth:2},{label:'Gini',data:giniData,fill:false,borderWidth:2}]},
                options:{responsive:true,plugins:{legend:{position:'top'}}}
            });
        }

        /* ---------- InicializaciÃ³n ---------- */
        window.addEventListener('DOMContentLoaded',()=>{
            updateMetrics();
            drawChart();
        });
    </script>
</body>
</html>
